# ImageStorage
Это Spring Boot приложение, реализующее Rest API сервиса хранения изображений для списка задач
### Оно позволяет:
- Сохранять, скачивать, удалять изображения

### Приложение использует следующий стек технологий:
- Spring Boot (Web, JDBC Template)
- Flyway
- Lombok
- СУБД PostgreSQL
- Docker

### О приложении
**ImageStorage** позволяет хранить по одному изображению на каждую задачу списка задач. Предполагается взаимодействие этого приложения с **[simple_todo](https://github.com/Eldar1163/simple_todo)**.
### Запуск приложения
Перед первым запуском необходимо создать Docker-контейнер , содержащий СУБД. Для создания контейнера с СУБД, в корне проекта находится файл **docker-compose.yaml**. По умолчанию приложение хранит изображения в директории **/ImageStorage/Images**. Когда контейнер работает, можно запускать само приложение. После запуска, оно становится доступным по адресу: http://localhost:48655
### API
**/api/image**

- `GET`: Получить изображение в кодировке Base64 и его идентификатора
- `POST`: Сохранить изображение
- `DELETE`: Удалить изображение

**/api/image/list**
- `GET`: Получить список изображений в кодировке Base64 и их идентификаторов

## Примеры использования API
В примерах запросы отправляются через **cURL**.
Для выпонения любого запроса обязательно требуется указать идентификатор задачи **<task_id>**, предстваляющий собой положительное целое число. Для сохранения изображения в приложении требуется указать путь до него **<ПУТЬ_ДО_ВАШЕГО_ИЗОБРАЖЕНИЯ>**.
### Сохранение изображения
Для сохранения изображения в приложении его необходимо передать в данных формы в ключе **image**
```
curl --location --request POST 'localhost:8080/api/image?taskid=<task_id>' \
--form 'image=@"<ПУТЬ_ДО_ВАШЕГО_ИЗОБРАЖЕНИЯ>"'
```
### Загрузка изображения
Вы можете загрузить изображение, используя следующий запрос
```
curl --location --request GET 'localhost:8080/api/image?taskid=<task_id>
```

Для загрузки списка изображений необходимо передать список идентификаторов на месте **<id1, id2, ..., idn>** в данных формы в ключе **idlist**.
Использовать следует следующий запрос
```
curl --location --request GET 'localhost:48655/api/image/list' \
--form 'idlist="[<id1, id2, ..., idn>]";type=application/json'
```

### Удаление изображения
Вы можете удалить изображение, использую следующий запрос
```
curl --location --request DELETE 'localhost:8080/api/image?taskid=<task_id>'
```
